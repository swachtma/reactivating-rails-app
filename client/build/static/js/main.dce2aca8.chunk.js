(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{272:function(e,t,n){e.exports=n.p+"static/media/reactivating-rails.aed17ca7.png"},298:function(e,t,n){e.exports=n(577)},355:function(e,t,n){},577:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"BASE_AUTH_PATH",function(){return j}),n.d(a,"HOME_ROUTE",function(){return E}),n.d(a,"CHAPTER_ROUTE",function(){return x}),n.d(a,"AUTH_ROUTE",function(){return w}),n.d(a,"ERROR_ROUTE",function(){return C});var r=n(0),c=n.n(r),i=n(70),o=n.n(i),s=n(28),l=n(257),u=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function d(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var p,h=n(33),f=n(258),m=n(89),b=n(121),v=n(63),g=n(115),y=n.n(g),O=n(259),k=n.n(O),_=n(34),j="http://localhost:3000/api/github/",E="HOME_ROUTE",x="CHAPTER_ROUTE",w="AUTH_ROUTE",C="ERROR_ROUTE",S=(p={},Object(v.a)(p,E,"/"),Object(v.a)(p,x,"/chapter/:chapter_id"),Object(v.a)(p,w,"/auth/:token/:bounce_path"),Object(v.a)(p,C,"/error"),p),R=y()();var T=n(54),A="LOAD_CHAPTERS",L=[],B=function(e){return e.sort(function(e,t){return e.id-t.id})};var N="LOAD_NODES",W=[],I=function(e){return e.sort(function(e,t){return e.chapter_id===t.chapter_id?e.id-t.id:e.chapter_id-t.chapter_id})};var H={},M=1;var U="ADD_ALERT",P="CLEAR_ALERTS",D=["application"],F=["info","warning","success","danger"],z=[],V=function(e){return e.scope=D.includes(e.scope)?e.scope:D[0],e.level=F.includes(e.level)?e.level:F[0],e};var G=n(260),J="SET_USER",$="SIGNAL_SIGNOUT",K="CLEAR_USER",q={};var Y="SET_BOOKMARK_LOCATIONS",Q="SET_BOOKMARK_OFFERED",X={prompt_shown:!0,last_read:{chapter:1},furthest_read:{chapter:1}},Z=function(e,t){var n=e.furthest_read.chapter<t.chapter?t:e.furthest_read;return Object.assign({},e,{last_read:t,furthest_read:n})};var ee=Object(_.connectRoutes)(R,S,{restoreScroll:k()(),initialDispatch:!1}),te=Object(h.combineReducers)({location:ee.reducer,user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return Object(G.a)({},t.payload);case K:return{};default:return e}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object.assign({},e,{active_chapter_id:M});case x:return Object.assign({},e,{active_chapter_id:t.payload.chapter_id});default:return e}},bookmarks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Z(e,t.payload);case Q:return Object.assign({},e,{prompt_shown:t.payload.prompt_shown});default:return e}},alerts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(T.a)(e).concat([V(t.payload)]);case P:return[];default:return e}},nodes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(T.a)(I(t.payload));default:return e}},chapters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(T.a)(B(t.payload));default:return e}}}),ne=n(261),ae={key:"root",storage:n.n(ne).a,whitelist:["user"]};var re=n(18),ce=n.n(re),ie=n(11),oe=n(122),se=n(262),le=n.n(se),ue=ce.a.mark(pe),de={transformResponse:[function(e){var t=JSON.parse(e);if("ERROR|FAILURE"===t.type)throw t.payload;return t}]};function pe(){var e,t,n,a=arguments;return ce.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e=!(a.length>0&&void 0!==a[0])||a[0],r.next=3,Object(ie.f)(function(e){return e.user.token});case 3:if(t=r.sent,n=le.a.create(de),!t){r.next=10;break}return n.defaults.headers.common.Authorization=t,r.abrupt("return",n);case 10:return r.abrupt("return",e?null:n);case 11:case"end":return r.stop()}},ue,this)}var he=function(e){return{type:N,payload:e}},fe=function(e){return{type:A,payload:e}},me=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F[0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:D[0];return{type:U,payload:{message:e,level:t,scope:n,timestamp:Date.now()}}},be=function(){return{type:P}},ve=function(){return{type:E}},ge=function(e){return{type:x,payload:{chapter_id:e}}},ye=function(){return{type:C}},Oe=ce.a.mark(je),ke=ce.a.mark(Ee),_e=function(e){return!(e.chapters.length&&e.nodes.length)};function je(){var e,t,n,a,r;return ce.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(ie.f)(_e);case 2:if(!c.sent){c.next=24;break}return c.prev=4,c.next=7,Object(ie.b)(pe,!1);case 7:return e=c.sent,c.next=10,Object(ie.a)([Object(ie.b)([e,"get"],"/api/nodes"),Object(ie.b)([e,"get"],"/api/chapters")]);case 10:return t=c.sent,n=Object(oe.a)(t,2),a=n[0],r=n[1],c.next=16,Object(ie.a)([Object(ie.e)(he(a.data)),Object(ie.e)(fe(r.data))]);case 16:c.next=24;break;case 18:return c.prev=18,c.t0=c.catch(4),c.next=22,Object(ie.e)(ye());case 22:return c.next=24,Object(ie.e)(me(c.t0.message,"danger"));case 24:case"end":return c.stop()}},Oe,this,[[4,18]])}function Ee(){return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ie.h)([E,x],je);case 2:case"end":return e.stop()}},ke,this)}var xe=ce.a.mark(we);function we(){return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ie.h)(Object.keys(a),function(){return Object(ie.e)(be())});case 2:case"end":return e.stop()}},xe,this)}var Ce=function(e){return{type:J,payload:e}},Se=function(){return{type:K}},Re=ce.a.mark(Te);function Te(e){var t;return ce.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=5;break}return t=decodeURIComponent(e),t=JSON.parse(t),n.next=5,Object(ie.e)(t);case 5:case"end":return n.stop()}},Re,this)}var Ae=function(e){return{type:Y,payload:{chapter:e}}},Le=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{type:Q,payload:{prompt_shown:e}}},Be=ce.a.mark(Ne);function Ne(){var e,t,n,a;return ce.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,pe();case 2:if(!(e=r.sent)){r.next=25;break}return r.prev=4,r.next=7,Object(ie.b)(e.get,"/api/bookmarks");case 7:return t=r.sent,n=t.data.last_read||0,a=t.data.furthest_read||0,r.next=12,Object(ie.e)(Ae(a));case 12:return r.next=14,Object(ie.e)(Ae(n));case 14:return r.next=16,Object(ie.e)(Le(!1));case 16:return r.abrupt("return",!0);case 19:return r.prev=19,r.t0=r.catch(4),console.log(r.t0.message),r.abrupt("return",!1);case 23:r.next=26;break;case 25:return r.abrupt("return",!1);case 26:case"end":return r.stop()}},Be,this,[[4,19]])}var We=ce.a.mark(Ue),Ie=ce.a.mark(Pe),He=ce.a.mark(De),Me=ce.a.mark(Fe);function Ue(){var e,t,n;return ce.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:0,a.prev=1,e=void 0,t=void 0;case 3:if(t){a.next=10;break}return a.next=6,Object(ie.g)([w,"persist/REHYDRATE"]);case 6:e=a.sent,t=e.payload.token||e.payload.user.token,a.next=3;break;case 10:return a.next=12,Object(ie.d)(Pe,t);case 12:return n=a.sent,a.next=15,Object(ie.b)(Te,e.payload.bounce_path);case 15:return a.next=17,Object(ie.g)($);case 17:return a.next=19,Object(ie.c)(n);case 19:return a.next=21,Object(ie.b)(Fe);case 21:a.next=27;break;case 23:return a.prev=23,a.t0=a.catch(1),a.next=27,Object(ie.e)(me(a.t0.message,"warning"));case 27:a.next=0;break;case 29:case"end":return a.stop()}},We,this,[[1,23]])}function Pe(e){var t,n;return ce.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(ie.b)(pe,!1);case 3:return t=a.sent,a.next=6,Object(ie.b)([t,"get"],"/api/hydrate_user?token="+e);case 6:return n=a.sent,a.next=9,Object(ie.d)(De,n.data.expires);case 9:return a.next=11,Object(ie.e)(Ce(n.data));case 11:return a.next=13,Object(ie.b)(Ne);case 13:a.next=19;break;case 15:return a.prev=15,a.t0=a.catch(0),a.next=19,Object(ie.b)(Fe,a.t0.message);case 19:case"end":return a.stop()}},Ie,this,[[0,15]])}function De(e){return ce.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=e>=2147e3?2147e3:e,t.next=3,Object(ie.b)(m.b,1e3*e);case 3:return t.next=5,Object(ie.b)(Fe,"Your Session has expired, please sign in again.");case 5:case"end":return t.stop()}},He,this)}function Fe(e){return ce.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=e||"Sign out successful",t.next=3,Object(ie.e)(Se());case 3:return t.next=5,Object(ie.e)(be());case 5:return t.next=7,Object(ie.e)(me(e,"warning"));case 7:return t.next=9,Object(ie.b)(m.b,3e3);case 9:return t.next=11,Object(ie.e)(be());case 11:case"end":return t.stop()}},Me,this)}var ze=ce.a.mark(Ge),Ve=ce.a.mark(Je);function Ge(e){var t,n,a;return ce.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.chapter_id,r.next=3,pe();case 3:return n=r.sent,r.next=6,Object(ie.e)(Ae(t));case 6:if(!n){r.next=17;break}return r.prev=7,r.next=10,Object(ie.b)(n.post,"/api/bookmarks",{chapter_id:t});case 10:a=r.sent,console.log(a.data.message),r.next=17;break;case 14:r.prev=14,r.t0=r.catch(7),console.log(r.t0.message);case 17:case"end":return r.stop()}},ze,this,[[7,14]])}function Je(){return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ie.h)(x,Ge);case 2:case"end":return e.stop()}},Ve,this)}var $e=ce.a.mark(Ke);function Ke(){return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ie.a)([Ee(),we(),Ue(),Je()]);case 2:case"end":return e.stop()}},$e,this)}var qe,Ye=Object(m.a)(),Qe=Object(h.applyMiddleware)(Ye,ee.middleware),Xe=(qe=te,Object(b.a)(ae,qe)),Ze=Object(h.createStore)(Xe,Object(f.composeWithDevTools)(ee.enhancer,Qe));Ye.run(Ke),ee.initialDispatch();var et=n(21),tt=n(22),nt=n(25),at=n(24),rt=n(26),ct=n(585),it=(n(355),n(263)),ot=n(264),st=n.n(ot),lt=n(265),ut=n.n(lt),dt=function(){function e(t,n,a){var r=this;Object(et.a)(this,e),this.continues=function(t){return r.priority===e.checkPriority(t)},this.appendLine=function(t){r.contents.push(e.cleanLine(t))},this.contents=[],this.section_id="node_"+n+"_section_"+a,this.priority=e.checkPriority(t)}return Object(tt.a)(e,[{key:"completed",get:function(){return{section_id:this.section_id,priority:this.priority,contents:e.preserveLineBreaks(this.contents)}}}],[{key:"preserveLineBreaks",value:function(e){return Array.from(e,function(e){return""===e?" ":e})}},{key:"cleanLine",value:function(e){return e.replace(/^([+-]\s)?(.*)$/,"$2")}},{key:"checkPriority",value:function(e){var t=e[0],n={"+":"high","-":"low"};return n[t]?n[t]:"normal"}}]),e}(),pt=function(){function e(t){var n=this;Object(et.a)(this,e),this.parseSections=function(e){for(var t,a=[];e.length>0;)(t=t||new dt(e[0],n.node_id,a.length)).continues(e[0])?(t.appendLine(e.shift()),0===e.length&&a.push(t.completed)):(a.push(t.completed),t=null);return a};var a=t.content.trim().split("\n");this.node_id=t.id,this.content_lines=e.getContentLines(a);var r=e.parseFenceOpen(a[0]),c=Object(oe.a)(r,2);this.block_type=c[0],this.block_path=c[1],this.sections=this.parseSections(Object(T.a)(this.content_lines))}return Object(tt.a)(e,[{key:"copy",get:function(){return Array.from(this.content_lines,function(e){return dt.cleanLine(e)}).join("\n")}}]),e}();pt.fenceLine=function(e){return e.match(/^```/)},pt.parseFenceOpen=function(e){return pt.fenceLine(e)?e.replace(/^(```\s?)([^()]*)?(\((.*)\))?\s*$/,["$2","$4"]).split(","):[void 0,void 0]},pt.getContentLines=function(e){return pt.fenceLine(e[0])?e.slice(1,e.length-1):e};var ht,ft=pt,mt=n(583),bt=n(592),vt=n(589),gt=n(254),yt={maxWidth:mt.a.onlyMobile.maxWidth},Ot=mt.a.onlyTablet,kt=mt.a.onlyComputer,_t=mt.a.onlyLargeScreen,jt=(mt.a.onlyWidescreen,{minWidth:yt.maxWidth+1}),Et=(Ot.maxWidth,kt.maxWidth,Ot.minWidth,kt.minWidth,_t.minWidth,{blockHeaderStyles:{borderBottom:"3px double #021a40",backgroundColor:"#021a40",color:"#fff",padding:"5px 10px 5px 20px"},filePath:{fontSize:".9em",display:"inline-block"},limitedTitle:{display:"inline-block",width:"125px",textOverflow:"ellipsis",overflow:"hidden"}}),xt=function(e){function t(){return Object(et.a)(this,t),Object(nt.a)(this,Object(at.a)(t).apply(this,arguments))}return Object(rt.a)(t,e),Object(tt.a)(t,[{key:"render",value:function(){var e=this.props,t=e.block_path,n=e.collapseHandler,a=e.triggerRef;return c.a.createElement("div",{style:Et.blockHeaderStyles,ref:a},c.a.createElement(wt,{block_path:t}),c.a.createElement(Ct,{handler:function(){return n(!1)},icon:"plus",label:"Expand All"}),c.a.createElement(Ct,{handler:function(){return n(!0)},icon:"minus",label:"Collapse All"}),c.a.createElement(Ct,{icon:"copy",label:"Copy All"}))}}]),t}(r.Component),wt=function(e){function t(e){var n;Object(et.a)(this,t),n=Object(nt.a)(this,Object(at.a)(t).call(this,e));var a=e.block_path.split("/");return n.block_file=a[a.length-1],n.block_path=n.props.block_path,n}return Object(rt.a)(t,e),Object(tt.a)(t,[{key:"render",value:function(){var e=this.block_file,t=this.block_path;return c.a.createElement("div",{style:Et.filePath},c.a.createElement(mt.a,Object.assign({as:"span"},yt),c.a.createElement("span",{style:Et.limitedTitle},e)),c.a.createElement(mt.a,Object.assign({as:"span"},jt),t))}}]),t}(r.Component),Ct=function(e){function t(){var e,n;Object(et.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(nt.a)(this,(e=Object(at.a)(t)).call.apply(e,[this].concat(r)))).state={isOpen:!1},n.handleOpen=function(e){n.setState({isOpen:!0}),"click"===e.type&&n.handleTimeout()},n.handleTimeout=function(){n.timeout=setTimeout(function(){n.setState({isOpen:!1})},400)},n.handleClose=function(){n.setState({isOpen:!1}),clearTimeout(n.timeout)},n}return Object(rt.a)(t,e),Object(tt.a)(t,[{key:"render",value:function(){var e=this.props,t=e.handler,n=e.icon,a=e.label;return c.a.createElement("span",{onTouchStart:this.handleTimeout},c.a.createElement(bt.a,{on:["click","hover"],open:this.state.isOpen,onClose:this.handleClose,onOpen:this.handleOpen,trigger:c.a.createElement(vt.a,{className:n,onClick:t,icon:!0,size:"mini",floated:"right",color:"grey"},c.a.createElement(gt.a,{name:n})),position:"bottom center",content:a}))}}]),t}(r.Component),St=function(e){function t(){return Object(et.a)(this,t),Object(nt.a)(this,Object(at.a)(t).apply(this,arguments))}return Object(rt.a)(t,e),Object(tt.a)(t,[{key:"componentDidMount",value:function(){hljs.highlightBlock(document.getElementById(this.props.section_id+"_full"))}},{key:"render",value:function(){var e=this.props,t=e.section_id,n=e.contents,a=e.block_type;return c.a.createElement("code",{id:t+"_full"},c.a.createElement("pre",{className:a},n.join("\n")))}}]),t}(r.Component),Rt=function(e){function t(){return Object(et.a)(this,t),Object(nt.a)(this,Object(at.a)(t).apply(this,arguments))}return Object(rt.a)(t,e),Object(tt.a)(t,[{key:"componentDidMount",value:function(){hljs.highlightBlock(document.getElementById(this.props.section_id+"_collapsed"))}},{key:"render",value:function(){var e=this.props,t=e.contents,n=e.section_id,a=e.block_type;return c.a.createElement("code",{id:n+"_collapsed"},c.a.createElement("pre",{className:a},c.a.createElement("div",null,t[0],c.a.createElement("i",{className:"fa fa-arrows-h","aria-hidden":"true"}),t[t.length-1].trim())))}}]),t}(r.Component),Tt={codeSectionStyle:{display:"table-row",padding:"0 5px",lineHeight:"100%"},codeGutterStyle:{display:"table-cell",padding:"0 5px"},codeBodyStyle:{margin:0,display:"table-cell",width:"100%",paddingRight:"10px"}},At=function(e){function t(e){var n;return Object(et.a)(this,t),(n=Object(nt.a)(this,Object(at.a)(t).call(this,e))).toggleCollapse=function(){return"low"===n.props.priority&&n.setState({collapsed:!n.state.collapsed})},n.setCollapse=function(e){return"low"===n.props.priority&&n.setState({collapsed:e})},n.state={collapsed:"low"===e.priority},n}return Object(rt.a)(t,e),Object(tt.a)(t,[{key:"render",value:function(){var e=this.props,t=e.section_id,n=e.priority,a=this.state.collapsed,r=a?"plus":"minus";return c.a.createElement("div",{className:n+"PrioritySection",onClick:this.toggleCollapse,style:Tt.codeSectionStyle},c.a.createElement("div",{className:"codeGutter",style:Tt.codeGutterStyle},c.a.createElement("i",{className:"fa fa-"+r+"-square-o"})),c.a.createElement("div",{className:"codeBody",style:Tt.codeBodyStyle,id:t},a?c.a.createElement(Rt,this.props):c.a.createElement(St,this.props)))}}]),t}(r.Component),Lt={codeBlockStyle:{margin:"1.5em 0"},blockBodyStyle:{padding:"10px 0",border:"1px solid #021a40",backgroundColor:"#F0F0F0",overflowX:"scroll"}},Bt=function(e){function t(){var e,n;Object(et.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(nt.a)(this,(e=Object(at.a)(t)).call.apply(e,[this].concat(r)))).renderCodeSections=function(){var e=n.props,t=e.addSectionRef,a=e.node;return Array.from(a.sections,function(e){return c.a.createElement(At,{ref:t,block_type:a.block_type,priority:e.priority,contents:e.contents,key:e.section_id,section_id:e.section_id})})},n}return Object(rt.a)(t,e),Object(tt.a)(t,[{key:"render",value:function(){var e=this.props,t=e.collapseSections,n=e.attachCopyTrigger,a=e.node,r=a.node_id,i=a.block_type,o=a.block_path;return c.a.createElement("div",{style:Lt.codeBlockStyle,key:"code_fence_"+r,id:"code_block_"+r,className:"language-"+i},o&&c.a.createElement(xt,{block_path:o,collapseHandler:t,triggerRef:n}),c.a.createElement("div",{style:Lt.blockBodyStyle},this.renderCodeSections()))}}]),t}(r.Component),Nt=function(e){function t(e){var n;return Object(et.a)(this,t),(n=Object(nt.a)(this,Object(at.a)(t).call(this,e))).collapseSections=function(e){n.section_refs.forEach(function(t){t&&t.setCollapse(e)})},n.addSectionRef=function(e){return n.section_refs.push(e)},n.attachCopyTrigger=function(e){n.triggerCopy=e},n.code_fence=new ft(e.node),n.section_refs=[],n}return Object(rt.a)(t,e),Object(tt.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.triggerCopy){var t=this.triggerCopy.querySelector("button.copy");return new ut.a(t,{text:function(){return e.code_fence.copy}})}}},{key:"render",value:function(){var e={block_type:this.code_fence.block_type,block_path:this.code_fence.block_path,sections:this.code_fence.sections};return c.a.createElement(Bt,{node:e,section_refs:this.section_refs,collapseSections:this.collapseSections,addSectionRef:this.addSectionRef,attachCopyTrigger:this.attachCopyTrigger})}}]),t}(r.Component),Wt=new st.a,It=function(e){function t(){var e,n;Object(et.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(nt.a)(this,(e=Object(at.a)(t)).call.apply(e,[this].concat(r)))).renderNodes=function(e){return e.map(function(e){return"code_block"===e.node_type?c.a.createElement(Nt,{key:"node_"+e.id,node:e}):c.a.createElement(it.a,{key:"node_"+e.id,dangerouslySetInnerHTML:{__html:Wt.render(e.content)}})})},n}return Object(rt.a)(t,e),Object(tt.a)(t,[{key:"render",value:function(){var e=this.props.nodes;return c.a.createElement("div",{id:"nodes-list"},this.renderNodes(e))}}]),t}(r.PureComponent),Ht=function(e){return{nodes:e.nodes,active_chapter_id:e.settings.active_chapter_id}},Mt=Object(s.connect)(Ht,null)(function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It;return t=e=function(e){function t(){return Object(et.a)(this,t),Object(nt.a)(this,Object(at.a)(t).apply(this,arguments))}return Object(rt.a)(t,e),Object(tt.a)(t,[{key:"render",value:function(){var e=this.props,t=e.nodes,a=e.active_chapter_id,r=t.filter(function(e){return e.chapter_id===a});return r&&r.length?c.a.createElement(n,{nodes:r}):null}}]),t}(r.Component),e.displayName=n.displayName||n.name||"Component",t}(ht)),Ut=n(288),Pt=n(119),Dt=n.n(Pt),Ft={chapter_footer_style:{margin:"30px 0",textAlign:"center"}};var zt=n(588),Vt=n(578),Gt=n(272),Jt=n.n(Gt),$t=n(587),Kt={dropdown:{margin:"0 1em"}};function qt(e){var t=e.active_chapter,n=e.dispatchRouteChapter,a=e.handleSidebarVisibility,r=e.chapters;return c.a.createElement($t.a,{onFocus:a,pointing:"top right",tabIndex:"1",placeholder:"Jump to Chapter...",className:"link item",style:Kt.dropdown,selectOnNavigation:!1,selectOnBlur:!1,value:t.id,text:t.title,onChange:n,options:r.map(function(e){return{key:"chapter_"+e.id,id:"chapter_menu_item_"+e.id,value:e.id,text:e.title,active:e.id===t.id}})})}var Yt={profile:{maxHeight:"32x",maxWidth:"32px",marginLeft:"1.757px"}};function Qt(e){var t=e.username,n=e.avatar,a=e.dispatchSignalSignout,r=e.handleSidebarVisibility,i=c.a.createElement(Vt.a,{src:n,avatar:!0,style:Yt.profile});return c.a.createElement(zt.a.Item,{name:t,fitted:!0},c.a.createElement($t.a,{closeOnBlur:!0,onFocus:r,icon:i,compact:!0,pointing:"top right"},c.a.createElement($t.a.Menu,null,c.a.createElement($t.a.Item,{onClick:a},"Sign Out"))))}var Xt={signout:{color:"#cc0000"}};var Zt=function(e){return Object(s.connect)(en,tn)(e)},en=function(e){return{username:e.user.username,avatar:e.user.avatar}},tn=function(e){return{dispatchSignalSignout:function(){return e({type:$})}}},nn=Zt(function(e){return e.username?c.a.createElement(Qt,e):c.a.createElement(Cn,null)}),an=Zt(function(e){var t=e.username,n=e.handleCloseClick,a=e.dispatchSignalSignout;return t?c.a.createElement(zt.a.Item,{link:!0,onClick:function(){n(),a()},name:"Sign Out"},c.a.createElement("div",{style:Xt.signout},c.a.createElement(gt.a,{name:"cancel"}),"Sign Out")):null}),rn={fixedMenuStyle:{backgroundColor:"#fff",border:"1px solid #ddd",boxShadow:"0px 3px 5px rgba(0, 0, 0, 0.2)",paddingLeft:"1em",paddingRight:"1em",maxWidth:"100vw"},menuIcon:{margin:"0"},logo:{margin:"auto 1.5em",maxWidth:"230px",verticalAlign:"middle"}};function cn(e){var t=e.active_chapter,n=e.handleSidebarVisibility;return c.a.createElement(zt.a,{id:"menu-bar",onClick:n,size:"huge",borderless:!0,fixed:"top",style:rn.fixedMenuStyle},c.a.createElement(ct.a,null,c.a.createElement(zt.a.Item,{id:"side-menu-button",link:!0,fitted:!0,name:"Main Menu"},c.a.createElement(gt.a,{id:"side-menu-icon",style:rn.menuIcon,color:"black",name:"content",size:"large"})),c.a.createElement(Vt.a,{fluid:!0,wrapped:!0,style:rn.logo,alt:"Reactivating Rails",src:Jt.a}),c.a.createElement(zt.a.Menu,{position:"right",value:t},c.a.createElement(mt.a,jt,c.a.createElement(qt,e)),c.a.createElement(nn,{handleSidebarVisibility:n}))))}var on=n(591),sn={popoutLayer:{position:"fixed",top:"0px",left:"0px"},pusher:{minHeight:"100vh",minWidth:"100vw"},sideBar:{minWidth:"320px",maxWidth:"320px",minHeight:"100vh",maxHeight:"100vh",padding:"45px 0 0 5px",zIndex:100}},ln=function(e){function t(e){var n;return Object(et.a)(this,t),(n=Object(nt.a)(this,Object(at.a)(t).call(this,e))).toggleVisibility=function(e){var t=void 0===e?!n.state.visible:e;n.setState(function(){return{visible:t}})},n.handleLink=function(e,t){n.props.dispatchRouteChapter(e,t),n.toggleVisibility()},n.handleClose=function(){return n.toggleVisibility()},n.state={visible:!1},n}return Object(rt.a)(t,e),Object(tt.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.chapters,a=t.active_chapter,r=this.state.visible,i=n.map(function(t){var n=t.id===a.id,r="chapter"+t.id;return c.a.createElement(zt.a.Item,{key:r,name:r,link:!n,onClick:n?null:e.handleLink,disabled:n,value:t.id,children:t.title})});return c.a.createElement("div",{style:sn.popoutLayer,onBlur:this.handleBlur,id:"sideBarPopout"},c.a.createElement(on.a.Pushable,{style:r?sn.pusher:null},c.a.createElement(on.a,{as:zt.a,animation:"overlay",width:"wide",visible:r,style:sn.sideBar,inverted:!0,vertical:!0},i,c.a.createElement(an,{handleCloseClick:this.handleClose}),c.a.createElement(zt.a.Item,{link:!0,onClick:this.handleClose,name:"Close Menu"},c.a.createElement("div",null,c.a.createElement(gt.a,{name:"cancel"}),"Close Menu"))),c.a.createElement(on.a.Pusher,{onClick:this.handleClose,style:r?sn.pusher:null,dimmed:!0})))}}]),t}(r.Component);var un=function(e){return Object(s.connect)(pn,hn)(dn(e))},dn=function(e){var t,n;return n=t=function(t){function n(){return Object(et.a)(this,n),Object(nt.a)(this,Object(at.a)(n).apply(this,arguments))}return Object(rt.a)(n,t),Object(tt.a)(n,[{key:"render",value:function(){var t=this.props,n=t.active_chapter_id,a=t.chapters,r=Object(Ut.a)(t,["active_chapter_id","chapters"]),i=a.find(function(e){return e.id===n}),o=a.find(function(e){return e.id===n+1}),s=a.map(function(e){return e.title=e.title.replace(/^chapter\s?/i,""),e});return a&&a.length?c.a.createElement(e,Object.assign({active_chapter:i||{id:-1,title:""},next_chapter:o,chapters:s},r)):null}}]),n}(r.Component),t.displayName=e.displayName||e.name||"Component",n},pn=function(e){return{chapters:e.chapters,active_chapter_id:e.settings.active_chapter_id}},hn=function(e){return{dispatchRouteChapter:function(t,n){return e(ge(n.value))}}},fn=un(function(e){var t=e.next_chapter;return c.a.createElement("div",{id:"chapter-footer-link",style:Ft.chapter_footer_style},c.a.createElement("h2",null,t?c.a.createElement(Dt.a,{to:ge(t.id)},"Next - ",t.title):"The End - Thank you for Reading!"))}),mn=un(function(e){var t=c.a.createRef();return[c.a.createElement(ln,Object.assign({ref:t},e,{key:"sidebar"})),c.a.createElement(cn,Object.assign({handleSidebarVisibility:function(e){var n=t.current.toggleVisibility;["side-menu-button","side-menu-icon"].includes(e.target.id)?n():n(!1)}},e,{key:"menubar"}))]}),bn=n(586),vn=n(590),gn={center:{textAlign:"center"}};var yn=Object(s.connect)(function(e){return{displayState:function(e){var t=e.bookmarks,n=t.prompt_shown,a=t.last_read,r=t.furthest_read,c=e.location.payload.chapter_id;return!(n||c===a.chapter&&c===r.chapter)}(e),last_read_id:e.bookmarks.last_read.chapter,furthest_read_id:e.bookmarks.furthest_read.chapter,active_chapter_id:e.settings.active_chapter_id}},function(e){return{dispatchSetBookmarkOffered:function(t){return e(Le(t))},dispatchRoutechapter:function(t){return e(ge(t))}}})(function(e){var t=e.displayState,n=e.dispatchRoutechapter,a=e.dispatchSetBookmarkOffered,r=e.furthest_read_id,i=e.active_chapter_id,o=e.last_read_id,s=function(e,t){a(),t.value&&n(t.value)};return c.a.createElement(bn.a,{open:t,onClose:a,basic:!0,size:"small"},c.a.createElement(vn.a,{icon:"archive",content:"Pick up where you left off"}),c.a.createElement(bn.a.Content,null,c.a.createElement("p",null,"We've saved some bookmarks on your behalf. Would you like to resume reading at one of these locations?")),c.a.createElement(bn.a.Actions,{style:gn.center},c.a.createElement(vt.a,{basic:!0,color:"red",onClick:s,inverted:!0},c.a.createElement(gt.a,{name:"remove"})," No, stay here"),o!==r&&i!==o&&c.a.createElement(vt.a,{color:"yellow",value:o,onClick:s,inverted:!0},c.a.createElement(gt.a,{name:"checkmark"})," Last read (Ch: ",o,")"),c.a.createElement(vt.a,{color:"green",value:r,onClick:s,inverted:!0},c.a.createElement(gt.a,{name:"checkmark"})," Furthest read (Ch: ",r,")")))}),On={reader_pane:{paddingBottom:"15px",overflowWrap:"break-word"}};function kn(){return c.a.createElement("div",{id:"reader-pane",style:On.reader_pane},c.a.createElement(yn,null),c.a.createElement(ct.a,{text:!0},c.a.createElement(Mt,null),c.a.createElement(fn,null)))}function _n(){return c.a.createElement("div",{id:"error-pane"},c.a.createElement(ct.a,{text:!0},c.a.createElement("h1",null,"Well Shucks..."),c.a.createElement("p",null,"This page is where we, unfortunately, make up some cutesy reason to apologize for our site not working at the moment. In any case, we don't seem able to do the things at the moment."),c.a.createElement("p",null,"How about you ",c.a.createElement(Dt.a,{to:ve()},"head to the homepage")," and try giving it another go?")))}function jn(e){switch(e.location.type){case C:return c.a.createElement(_n,null);case x:case E:return c.a.createElement(kn,null);default:return c.a.createElement(_n,null)}}var En={githubIcon:{marginRight:0}};var xn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jn;return Object(s.connect)(function(e){return{location:e.location}},null)(e)},wn=xn,Cn=xn(function(e){var t=e.location,n=JSON.stringify({type:t.type,payload:t.payload}),a=encodeURIComponent(j+"?bounce_path="+n);return c.a.createElement(zt.a.Item,{href:"https://github.com/login/oauth/authorize?client_id=a86bc65853ae65d3be52&redirect_uri="+a,name:"Sign in with GitHub",fitted:!0},c.a.createElement(gt.a,{name:"github",style:En.githubIcon,size:"big"}))}),Sn={alertStyle:{padding:"15px",marginBottom:"20px",border:"1px solid transparent",borderRadius:"4px"},alertLevels:{info:{backgroundColor:"#d9edf7",borderColor:"#bce8f1",color:"#31708f"},warning:{backgroundColor:"#fcf8e3",borderColor:"#faebcc",color:"#8a6d3b"},success:{backgroundColor:"#dff0d8",borderColor:"#d6e9c6",color:"#3c763d"},danger:{backgroundColor:"#f2dede",borderColor:"#ebccd1",color:"#a94442"}}};function Rn(e){var t=e.scope,n=e.alerts;return n=n.map(function(e){var n="alert alert-"+e.level,a=Object.assign(Sn.alertStyle,Sn.alertLevels[e.level]);return t===e.scope&&c.a.createElement("div",{key:e.timestamp,children:e.message,className:n,style:a})}),c.a.createElement("div",{className:"alert_list_"+t},n)}var Tn=wn(),An=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rn;return Object(s.connect)(function(t){return{alerts:t.alerts,scope:e}},null)(t)}(),Ln=function(e){function t(){return Object(et.a)(this,t),Object(nt.a)(this,Object(at.a)(t).apply(this,arguments))}return Object(rt.a)(t,e),Object(tt.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{id:"app"},c.a.createElement(mn,null),c.a.createElement(ct.a,{text:!0,id:"main-section"},c.a.createElement(An,null),c.a.createElement(Tn,null)))}}]),t}(r.Component),Bn={store:Ze,persistor:Object(b.b)(Ze)},Nn=Bn.store,Wn=Bn.persistor;window.store=Nn,o.a.render(c.a.createElement(s.Provider,{store:Nn},c.a.createElement(l.PersistGate,{loading:null,persistor:Wn},c.a.createElement(Ln,null))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");u?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):d(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):d(e)})}}()}},[[298,2,1]]]);
//# sourceMappingURL=main.dce2aca8.chunk.js.map