{"version":3,"sources":["assets/images/reactivating-rails.png","registerServiceWorker.js","constants/settings.js","store/reducers/router.js","constants/chapters.js","store/reducers/chapters.js","constants/nodes.js","store/reducers/nodes.js","store/reducers/settings.js","constants/alerts.js","store/reducers/alerts.js","constants/user.js","store/reducers/user.js","constants/bookmarks.js","store/reducers/bookmarks.js","store/root_reducer.js","store/persist.js","store/sagas/utils/axios_client.js","actions/nodes.js","actions/chapters.js","actions/alerts.js","actions/routes.js","store/sagas/instantiate_book.js","store/sagas/clear_alerts.js","actions/user.js","store/sagas/utils/redirect_path.js","actions/bookmarks.js","store/sagas/utils/retrieve_bookmark.js","store/sagas/manage_user_session.js","store/sagas/set_bookmarks.js","store/root_saga.js","store/store.js","containers/lib/code_section.js","containers/lib/code_fence.js","containers/filtered_nodes_list.js","constants/breakpoints.js","components/nodes/code_header.js","components/nodes/code_full.js","components/nodes/code_collapsed.js","components/nodes/code_section.js","components/nodes/code_block.js","containers/code_example.js","components/nodes_list.js","components/chapter_footer.js","components/chapter_menu_items.js","components/user_badge.js","components/side_bar_signout.js","containers/user_provider.js","components/menu_bar.js","components/side_bar_popout.js","containers/chapter_provider.js","components/navigation_menus.js","components/bookmark_modal.js","containers/bookmarks_provider.js","components/reader_pane.js","components/error_pane.js","components/router_switch.js","components/github_icon.js","containers/route_provider.js","components/alert_list.js","App.js","containers/alert_provider.js","index.js"],"names":["module","exports","__webpack_require__","p","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","catch","error","BASE_AUTH_PATH","HOME_ROUTE","CHAPTER_ROUTE","AUTH_ROUTE","ERROR_ROUTE","routeMap","_routeMap","Object","defineProperty","ROUTES","history","createHistory","LOAD_CHAPTERS","default_state","sortChapters","chapters","sort","a","b","id","LOAD_NODES","sortNodes","nodes","chapter_id","default_chapter","ADD_ALERT","CLEAR_ALERTS","scopes","lvls","normalizeAlert","payload","scope","constants","includes","level","SET_USER","SIGNAL_SIGNOUT","CLEAR_USER","SET_BOOKMARK_LOCATIONS","SET_BOOKMARK_OFFERED","prompt_shown","last_read","chapter","furthest_read","buildLocations","new_loc","position","assign","router","connectRoutes","restoreScroll","initialDispatch","combineReducers","reducer","user","arguments","length","undefined","action","type","objectSpread","settings","active_chapter_id","bookmarks","alerts","toConsumableArray","concat","persistConfig","key","storage","whitelist","axiosCreateClient","axios_config","transformResponse","data","jdata","JSON","parse","req_auth","token","client","_args","regenerator_default","wrap","_context","prev","next","select","s","sent","axios","create","defaults","headers","common","abrupt","stop","_marked","this","loadNodes","loadChapters","addAlert","message","timestamp","Date","now","clearAlerts","routeHome","routes","routeChapter","routeError","instantiateBook","watchBookRoutesSaga","checkBookHydration","pub_client","_ref","_ref2","call","all","slicedToArray","put","t0","instantiate_book_marked","_context2","takeEvery","_marked2","watchRoutesToClearAlerts","keys","clear_alerts_marked","setUser","clearUser","redirectToPathIf","path","rd","decodeURIComponent","redirect_path_marked","setBookmarkLocations","setBookmarkOffered","bool","retrieveUserBookmark","auth_client","response","lr","fr","get","retrieve_bookmark_marked","manageUserSession","handleSignIn","manageUserTimeout","handleSignOut","sign_in","take","fork","bounce_path","user_actions","cancel","manage_user_session_marked","expires","manage_user_session_marked2","countdown","_context3","delay","_marked3","_context4","_marked4","setBookmarks","watchBookmarkChanges","ch_id","post","set_bookmarks_marked","set_bookmarks_marked2","rootSaga","root_saga_marked","root_reducer","sagaMiddleware","createSagaMiddleware","middlewares","applyMiddleware","middleware","persistedReducer","rootReducer","persistReducer","base_store","createStore","composeWithDevTools","enhancer","run","CodeSection","first_line","node_id","section_id","_this","classCallCheck","continues","line","priority","checkPriority","appendLine","contents","push","cleanLine","preserveLineBreaks","Array","from","c","raw_line","replace","flag","flagMap","+","-","CodeFence","node","parseSections","remaining_lines","current_section","sections","shift","completed","all_lines","content","trim","split","content_lines","getContentLines","_CodeFence$parseFence","parseFenceOpen","_CodeFence$parseFence2","block_type","block_path","join","fenceLine","lines","slice","WrappedComponent","onlyMobile","maxWidth","Responsive","onlyTablet","onlyDesktop","onlyComputer","onlyLarge","onlyLargeScreen","aboveMobile","onlyWidescreen","minWidth","styles","blockHeaderStyles","borderBottom","backgroundColor","color","padding","filePath","fontSize","display","limitedTitle","width","textOverflow","overflow","CodeHeader","_this$props","props","collapseHandler","triggerRef","react_default","createElement","style","ref","code_header_FilePath","code_header_HeaderControlButton","handler","icon","label","Component","FilePath","_Component2","possibleConstructorReturn","getPrototypeOf","path_segments","block_file","inherits","createClass","value","as","BREAKPOINTS","HeaderControlButton","_Component3","_getPrototypeOf2","_this2","_len","args","_key","apply","isOpen","handleOpen","e","setState","handleTimeout","timeout","setTimeout","handleClose","clearTimeout","_this$props2","onTouchStart","Popup","on","open","onClose","onOpen","trigger","Button","className","onClick","size","floated","Icon","name","CodeFull","hljs","highlightBlock","document","getElementById","CodeCollapsed","aria-hidden","codeSectionStyle","lineHeight","codeGutterStyle","codeBodyStyle","margin","paddingRight","toggleCollapse","collapsed","setCollapse","code_collapsed","code_full","codeBlockStyle","blockBodyStyle","border","overflowX","CodeBlock","renderCodeSections","addSectionRef","nodes_code_section","collapseSections","attachCopyTrigger","code_header","CodeExample","section_refs","forEach","triggerCopy","code_fence","button","querySelector","ClipboardJS","text","copy","code_block_CodeBlock","md","MarkdownIt","NodesList","renderNodes","map","node_type","code_example","react_dom_fragment","dangerouslySetInnerHTML","__html","render","PureComponent","mapStateToProps","connectToNodes","connect","_class","_temp","_Component","node_list","filter","n","displayName","nodesProvider","chapter_footer_style","textAlign","dropdown","ChapterMenuItems","active_chapter","dispatchRouteChapter","handleSidebarVisibility","Dropdown","onFocus","pointing","tabIndex","placeholder","selectOnNavigation","selectOnBlur","title","onChange","options","active","profile","maxHeight","marginLeft","ProfileIcon","username","avatar","dispatchSignalSignout","badge","Image","src","Menu","Item","fitted","closeOnBlur","compact","signout","connectToUser","mapDispatchToProps","dispatch","ConnectedUserBadge","ConnectedGitHubIcon","ConnectedSidebarSignOut","handleCloseClick","link","fixedMenuStyle","boxShadow","paddingLeft","menuIcon","logo","verticalAlign","MenuBar","borderless","fixed","Container","fluid","wrapped","alt","rrLogo","popoutLayer","top","left","pusher","minHeight","sideBar","zIndex","SideBarPopout","toggleVisibility","vis","visible","handleLink","t","chapter_links","status","disabled","children","onBlur","handleBlur","Sidebar","Pushable","animation","inverted","vertical","Pusher","dimmed","connectToChapters","chapterProvider","ChapterFilter","otherProps","objectWithoutProperties","find","next_chapter","cleaned_chapters","event","target","ConnectedChapterFooterLink","redux_first_router_link_dist_default","to","actions","ConnectedNavigationMenus","sideBarRef","React","createRef","side_bar_popout_SideBarPopout","tgl","current","center","displayState","_state$bookmarks","loc","calculateDisplayState","last_read_id","furthest_read_id","dispatchSetBookmarkOffered","dispatchRoutechapter","manageResponse","Modal","basic","Header","Content","Actions","reader_pane","paddingBottom","overflowWrap","ReaderPane","bookmarks_provider","filtered_nodes_list","ErrorPane","RouterSwitch","githubIcon","marginRight","routerProvider","stringify","encodeURIComponent","href","alertStyle","marginBottom","borderRadius","alertLevels","info","borderColor","warning","success","danger","AlertList","ac","ConnectedRouterSwitch","ApplicationAlerts","connectToAlerts","App","store","persistor","persistStore","ReactDOM","es","integration_react","loading","src_App_0","URL","process","origin","addEventListener","fetch","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.dce2aca8.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/reactivating-rails.aed17ca7.png\";","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport default function register () {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          )\n        })\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl)\n      }\n    })\n  }\n}\n\nfunction registerValidSW (swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.')\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker (swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister () {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","export const BASE_AUTH_PATH = 'http://localhost:3000/api/github/'\n\nexport const HOME_ROUTE = 'HOME_ROUTE'\nexport const CHAPTER_ROUTE = 'CHAPTER_ROUTE'\nexport const AUTH_ROUTE = 'AUTH_ROUTE'\nexport const ERROR_ROUTE = 'ERROR_ROUTE'\n","import createHistory from 'history/createBrowserHistory'\nimport restoreScroll from 'redux-first-router-restore-scroll'\nimport { connectRoutes } from 'redux-first-router'\n\nimport * as ROUTES from '../../constants/settings'\n\nconst routeMap = {\n  // Routes here \"ACTION_NAME\":\"/some/route\"\n  [ROUTES.HOME_ROUTE]: '/',\n  [ROUTES.CHAPTER_ROUTE]: '/chapter/:chapter_id',\n  [ROUTES.AUTH_ROUTE]: '/auth/:token/:bounce_path',\n  [ROUTES.ERROR_ROUTE]: '/error'\n}\n\nconst history = createHistory()\n\nexport default function setupRouter () {\n  return connectRoutes(\n    history,\n    routeMap,\n    { restoreScroll: restoreScroll(), initialDispatch: false }\n  )\n}\n","export const LOAD_CHAPTERS = 'LOAD_CHAPTERS'\n","import * as constants from '../../constants/chapters'\n\nlet default_state = []\n\nexport const sortChapters = (chapters) =>\n  chapters.sort((a, b) => a.id - b.id)\n\nexport default function chaptersReducer (state = default_state, action) {\n  switch (action.type) {\n    case (constants.LOAD_CHAPTERS):\n      return [...sortChapters(action.payload)]\n    default:\n      return state\n  }\n}\n","export const LOAD_NODES = 'LOAD_NODES'\n","import * as constants from '../../constants/nodes'\n\nlet default_state = []\n\nexport const sortNodes = (nodes) =>\n  nodes.sort((a, b) => a.chapter_id === b.chapter_id ? a.id - b.id : a.chapter_id - b.chapter_id)\n  // 2 step sort, compares by node id unless chapters IDs not matched, then sort by chapter ID\n\nexport default function nodesReducer (state = default_state, action) {\n  switch (action.type) {\n    case (constants.LOAD_NODES):\n      return [...sortNodes(action.payload)]\n    default:\n      return state\n  }\n}\n","import * as constants from '../../constants/settings'\n\nlet default_state = {}\nlet default_chapter = 1\n\nexport default function settingsReducer (state = default_state, action) {\n  switch (action.type) {\n    case (constants.HOME_ROUTE):\n      return Object.assign({}, state, { active_chapter_id: default_chapter })\n    case (constants.CHAPTER_ROUTE):\n      return Object.assign({}, state, { active_chapter_id: action.payload.chapter_id })\n    default:\n      return state\n  }\n}\n","export const ADD_ALERT = 'ADD_ALERT'\nexport const CLEAR_ALERTS = 'CLEAR_ALERTS'\n\n// Enumerated Values: default value should stay in array[0] of each list\nexport const scopes = ['application']\nexport const lvls = ['info', 'warning', 'success', 'danger']\n","import * as constants from '../../constants/alerts'\nconst default_state = []\n\nexport const normalizeAlert = (payload) => {\n  payload.scope = constants.scopes.includes(payload.scope) ? payload.scope : constants.scopes[0]\n  payload.level = constants.lvls.includes(payload.level) ? payload.level : constants.lvls[0]\n  return payload\n}\n\nexport default function alertsReducer (state = default_state, action) {\n  switch (action.type) {\n    case (constants.ADD_ALERT):\n      return [...state, normalizeAlert(action.payload)]\n    case (constants.CLEAR_ALERTS):\n      return []\n    default:\n      return state\n  }\n}\n","export const SET_USER = 'SET_USER'\nexport const SIGNAL_SIGNOUT = 'SIGNAL_SIGNOUT'\nexport const CLEAR_USER = 'CLEAR_USER'\n","import * as constants from '../../constants/user'\nconst default_state = {}\n\nexport default function userReducer (state = default_state, action) {\n  switch (action.type) {\n    case (constants.SET_USER):\n      return { ...action.payload }\n    case (constants.CLEAR_USER):\n      return {}\n    default:\n      return state\n  }\n}\n","export const SET_BOOKMARK_LOCATIONS = 'SET_BOOKMARK_LOCATIONS'\nexport const SET_BOOKMARK_OFFERED = 'SET_BOOKMARK_OFFERED'\n","import * as constants from '../../constants/bookmarks'\n\nconst default_state = {\n  prompt_shown: true,\n  last_read: { chapter: 1 },\n  furthest_read: { chapter: 1 }\n}\n\nexport const buildLocations = (state, new_loc) => {\n  let position = state.furthest_read.chapter < new_loc.chapter ? new_loc : state.furthest_read\n  return Object.assign({}, state, { last_read: new_loc, furthest_read: position })\n}\n\nexport default function bookmarksReducer (state = default_state, action) {\n  switch (action.type) {\n    case (constants.SET_BOOKMARK_LOCATIONS):\n      return buildLocations(state, action.payload)\n    case (constants.SET_BOOKMARK_OFFERED):\n      return Object.assign({}, state, { prompt_shown: action.payload.prompt_shown })\n    default:\n      return state\n  }\n}\n","import { combineReducers } from 'redux'\n\nimport setupRouter from './reducers/router'\nimport chapters from './reducers/chapters'\nimport nodes from './reducers/nodes'\nimport settings from './reducers/settings'\nimport alerts from './reducers/alerts'\nimport user from './reducers/user'\nimport bookmarks from './reducers/bookmarks'\n\nexport const router = setupRouter()\n\nexport default combineReducers({\n  location: router.reducer,\n  user,\n  settings,\n  bookmarks,\n  alerts,\n  nodes,\n  chapters\n})\n","import storage from 'redux-persist/lib/storage'\nimport { persistReducer } from 'redux-persist'\n\nconst persistConfig = {\n  key: 'root',\n  storage: storage,\n  whitelist: ['user']\n}\n\nexport default function persistWrap (root_reducer) {\n  return persistReducer(persistConfig, root_reducer)\n}\n","import axios from 'axios'\nimport { select } from 'redux-saga/effects'\n\nconst axios_config = {\n  transformResponse: [(data) => {\n    let jdata = JSON.parse(data)\n    if (jdata.type === 'ERROR|FAILURE') { throw jdata.payload }\n    return jdata\n  }]\n}\n\nexport default function * axiosCreateClient (req_auth = true) {\n  let token = yield select((s) => s.user.token)\n  let client = axios.create(axios_config)\n\n  if (token) {\n    client.defaults.headers.common['Authorization'] = token\n    return client\n  } else {\n    return req_auth ? null : client\n  }\n}\n","import * as constants from '../constants/nodes'\n\nexport const loadNodes = (payload) => ({ type: constants.LOAD_NODES, payload })\n","import * as constants from '../constants/chapters'\n\nexport const loadChapters = (payload) => ({ type: constants.LOAD_CHAPTERS, payload })\n","import * as constants from '../constants/alerts'\n\nexport const addAlert = (message, level = constants.lvls[0], scope = constants.scopes[0]) => ({\n  type: constants.ADD_ALERT, payload: { message, level, scope, timestamp: Date.now() }\n})\n\nexport const clearAlerts = () => ({ type: constants.CLEAR_ALERTS })\n","import * as routes from '../constants/settings'\n\nexport const routeHome = () => ({ type: routes.HOME_ROUTE })\n\nexport const routeChapter = (chapter_id) => (\n  { type: routes.CHAPTER_ROUTE, payload: { chapter_id } }\n)\n\nexport const routeError = () => ({ type: routes.ERROR_ROUTE })\n","import { takeEvery, select, put, call, all } from 'redux-saga/effects'\n\nimport axiosCreateClient from './utils/axios_client'\nimport * as routes from '../../constants/settings'\nimport { loadNodes } from '../../actions/nodes'\nimport { loadChapters } from '../../actions/chapters'\nimport { addAlert } from '../../actions/alerts'\nimport { routeError } from '../../actions/routes'\n\nexport const checkBookHydration = (state) => {\n  return !(state.chapters.length && state.nodes.length)\n}\n\nexport function * instantiateBook () {\n  const dehydrated = yield select(checkBookHydration)\n\n  if (dehydrated) {\n    try {\n      const pub_client = yield call(axiosCreateClient, false)\n      const [nodes, chapters] = yield all([\n        call([pub_client, 'get'], '/api/nodes'),\n        call([pub_client, 'get'], '/api/chapters')\n      ])\n\n      yield all([\n        put(loadNodes(nodes.data)),\n        put(loadChapters(chapters.data))\n      ])\n    } catch (e) {\n      yield put(routeError())\n      yield put(addAlert(e.message, 'danger'))\n    }\n  }\n}\n\nexport function * watchBookRoutesSaga () {\n  yield takeEvery([routes.HOME_ROUTE, routes.CHAPTER_ROUTE], instantiateBook)\n}\n","import { takeEvery, put } from 'redux-saga/effects'\n\nimport * as routes from '../../constants/settings'\nimport { clearAlerts } from '../../actions/alerts'\n\nexport function * watchRoutesToClearAlerts () {\n  yield takeEvery(Object.keys(routes), () => put(clearAlerts()))\n}\n","import * as constants from '../constants/user'\n\nexport const setUser = (payload) => ({\n  type: constants.SET_USER, payload\n})\n\nexport const signalSignout = () => ({ type: constants.SIGNAL_SIGNOUT })\nexport const clearUser = () => ({ type: constants.CLEAR_USER })\n","import { put } from 'redux-saga/effects'\n\nexport default function * redirectToPathIf (path) {\n  if (path) {\n    let rd = decodeURIComponent(path)\n    rd = JSON.parse(rd)\n    yield put(rd)\n  }\n}\n","import * as constants from '../constants/bookmarks'\n\nexport const setBookmarkLocations = (chapter_id) => ({\n  type: constants.SET_BOOKMARK_LOCATIONS, payload: { chapter: chapter_id }\n})\n\nexport const setBookmarkOffered = (bool = true) => ({\n  type: constants.SET_BOOKMARK_OFFERED, payload: { prompt_shown: bool }\n})\n","import axiosCreateClient from './axios_client'\nimport { call, put } from 'redux-saga/effects'\n\nimport { setBookmarkLocations, setBookmarkOffered } from '../../../actions/bookmarks'\n\nexport default function * retrieveUserBookmark () {\n  let auth_client = yield axiosCreateClient()\n\n  if (auth_client) {\n    try {\n      let response = yield call(auth_client.get, '/api/bookmarks')\n      let lr = response.data.last_read || 0\n      let fr = response.data.furthest_read || 0\n\n      yield put(setBookmarkLocations(fr))\n      yield put(setBookmarkLocations(lr))\n\n      yield put(setBookmarkOffered(false))\n\n      return true\n    } catch (e) {\n      // fails silently without throwing further errors to parent sagas\n      console.log(e.message)\n      return false\n    }\n  } else { return false }\n}\n","import { put, call, take, fork, cancel } from 'redux-saga/effects'\nimport { delay } from 'redux-saga'\nimport axiosCreateClient from './utils/axios_client'\n\nimport * as routes from '../../constants/settings'\nimport * as user_actions from '../../constants/user'\nimport { setUser, clearUser } from '../../actions/user'\nimport { addAlert, clearAlerts } from '../../actions/alerts'\nimport redirectToPathIf from './utils/redirect_path'\nimport retrieveUserBookmark from './utils/retrieve_bookmark'\n\nexport function * manageUserSession () {\n  while (true) {\n    try {\n      let action, token\n      while (!token) {\n        action = yield take([routes.AUTH_ROUTE, 'persist/REHYDRATE'])\n        token = action.payload.token || action.payload.user.token\n      }\n\n      let sign_in = yield fork(handleSignIn, token)\n      yield call(redirectToPathIf, action.payload.bounce_path)\n\n      // Wait for Sign Out, and then...\n      yield take(user_actions.SIGNAL_SIGNOUT)\n      yield cancel(sign_in)\n      yield call(handleSignOut)\n    } catch (e) {\n      yield put(addAlert(e.message, 'warning'))\n    }\n  }\n}\n\nexport function * handleSignIn (token) {\n  try {\n    const pub_client = yield call(axiosCreateClient, false)\n    let user = yield call([pub_client, 'get'], '/api/hydrate_user?token=' + token)\n\n    yield fork(manageUserTimeout, user.data.expires)\n    yield put(setUser(user.data))\n    yield call(retrieveUserBookmark)\n  } catch (e) {\n    yield call(handleSignOut, e.message)\n  }\n}\n\nexport function * manageUserTimeout (countdown) {\n  // delay timeout cannot exceed 32-bit int (2147483647) or ~24 days\n  countdown = countdown >= 2147000 ? 2147000 : countdown\n  yield call(delay, countdown * 1000)\n  yield call(handleSignOut, 'Your Session has expired, please sign in again.')\n}\n\nexport function * handleSignOut (message) {\n  message = message || 'Sign out successful'\n  yield put(clearUser())\n\n  yield put(clearAlerts())\n  yield put(addAlert(message, 'warning'))\n  yield call(delay, 3000)\n  yield put(clearAlerts())\n}\n","import { takeEvery, call, put } from 'redux-saga/effects'\nimport axiosCreateClient from './utils/axios_client'\n\nimport * as routes from '../../constants/settings'\nimport { setBookmarkLocations } from '../../actions/bookmarks'\n\nexport function * setBookmarks (action) {\n  let ch_id = action.payload.chapter_id\n  const auth_client = yield axiosCreateClient()\n  // Set bookmarks locally\n  yield put(setBookmarkLocations(ch_id))\n\n  if (auth_client) {\n    try {\n      let response = yield call(auth_client.post, '/api/bookmarks', { chapter_id: ch_id })\n      console.log(response.data.message)\n    } catch (e) {\n      console.log(e.message)\n    }\n  }\n}\n\nexport function * watchBookmarkChanges () {\n  yield takeEvery(routes.CHAPTER_ROUTE, setBookmarks)\n}\n","import { all } from 'redux-saga/effects'\n\nimport { watchBookRoutesSaga } from './sagas/instantiate_book'\nimport { watchRoutesToClearAlerts } from './sagas/clear_alerts'\nimport { manageUserSession } from './sagas/manage_user_session'\nimport { watchBookmarkChanges } from './sagas/set_bookmarks'\n\nexport default function * rootSaga () {\n  yield all([\n    watchBookRoutesSaga(),\n    watchRoutesToClearAlerts(),\n    manageUserSession(),\n    watchBookmarkChanges()\n  ])\n}\n","import { createStore, applyMiddleware } from 'redux'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport createSagaMiddleware from 'redux-saga'\nimport { persistStore } from 'redux-persist'\n\nimport rootReducer, { router } from './root_reducer'\nimport persistWrap from './persist'\nimport rootSaga from './root_saga'\n\n// Middleware setup\nconst sagaMiddleware = createSagaMiddleware()\nconst middlewares = applyMiddleware(sagaMiddleware, router.middleware)\n\n// Reducer setup\nconst persistedReducer = persistWrap(rootReducer)\n\n// Store setup\nconst base_store = createStore(\n  persistedReducer, composeWithDevTools(router.enhancer, middlewares)\n)\n\n// Saga dispatch must follow store creation with persist so values can rehydrate\nsagaMiddleware.run(rootSaga)\nrouter.initialDispatch()\n\nexport default () =>\n  ({ store: base_store, persistor: persistStore(base_store) })\n","class CodeSection {\n  constructor (first_line, node_id, section_id) {\n    this.contents = []\n    this.section_id = 'node_' + node_id + '_section_' + section_id\n    this.priority = CodeSection.checkPriority(first_line)\n  }\n\n  get completed () {\n    return {\n      section_id: this.section_id,\n      priority: this.priority,\n      contents: CodeSection.preserveLineBreaks(this.contents)\n    }\n  }\n\n  continues = (line) =>\n    this.priority === CodeSection.checkPriority(line);\n\n  appendLine = (line) => {\n    this.contents.push(\n      CodeSection.cleanLine(line)\n    )\n  }\n\n  static preserveLineBreaks (contents) {\n    return Array.from(contents, c => c === '' ? ' ' : c)\n  }\n\n  static cleanLine (raw_line) {\n    return raw_line.replace(/^([+-]\\s)?(.*)$/, '$2')\n  }\n\n  static checkPriority (line) {\n    let flag = line[0]\n    let flagMap = { '+': 'high', '-': 'low' }\n\n    return flagMap[flag] ? flagMap[flag] : 'normal'\n  }\n}\n\nexport default CodeSection\n","import CodeSection from './code_section'\n\nclass CodeFence {\n  constructor (node) {\n    let all_lines = node.content.trim().split('\\n')\n\n    this.node_id = node.id\n    this.content_lines = CodeFence.getContentLines(all_lines);\n    [this.block_type, this.block_path] = CodeFence.parseFenceOpen(all_lines[0])\n    this.sections = this.parseSections([...this.content_lines])\n  }\n\n  get copy () {\n    return Array.from(this.content_lines, (line) => {\n      return CodeSection.cleanLine(line)\n    }).join('\\n')\n  }\n\n  parseSections = (remaining_lines) => {\n    let current_section; let sections = []\n\n    while (remaining_lines.length > 0) {\n      current_section = current_section || new CodeSection(remaining_lines[0], this.node_id, sections.length)\n      if (current_section.continues(remaining_lines[0])) {\n        current_section.appendLine(remaining_lines.shift())\n        if (remaining_lines.length === 0) { sections.push(current_section.completed) }\n      } else {\n        sections.push(current_section.completed)\n        current_section = null\n      }\n    }\n\n    return sections\n  }\n\n  static fenceLine = (line) => line.match(/^```/);\n\n  static parseFenceOpen = (first_line) => {\n    if (CodeFence.fenceLine(first_line)) {\n      return first_line.replace(/^(```\\s?)([^()]*)?(\\((.*)\\))?\\s*$/, ['$2', '$4']).split(',')\n    } else {\n      return [undefined, undefined]\n    }\n  };\n\n  static getContentLines = (lines) =>\n    CodeFence.fenceLine(lines[0]) ? lines.slice(1, lines.length - 1) : lines;\n}\n\nexport default CodeFence\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport NodesList from '../components/nodes_list'\n\nexport const nodesProvider = (WrappedComponent = NodesList) =>\n  class extends Component {\n    static displayName = WrappedComponent.displayName || WrappedComponent.name || 'Component';\n\n    render () {\n      const { nodes, active_chapter_id } = this.props\n      const node_list = nodes.filter(n => n.chapter_id === active_chapter_id)\n      return node_list && node_list.length ? <WrappedComponent nodes={node_list} /> : null\n    }\n  }\n\nconst mapStateToProps = (state) => ({\n  nodes: state.nodes,\n  active_chapter_id: state.settings.active_chapter_id\n})\n\nexport const connectToNodes = (WrappedComponent) =>\n  connect(mapStateToProps, null)(nodesProvider(WrappedComponent))\n\nexport default connectToNodes()\n","import { Responsive } from 'semantic-ui-react'\n\nexport const onlyMobile = { maxWidth: Responsive.onlyMobile.maxWidth }\nexport const onlyTablet = Responsive.onlyTablet\nexport const onlyDesktop = Responsive.onlyComputer\nexport const onlyLarge = Responsive.onlyLargeScreen\nexport const onlyWide = Responsive.onlyWidescreen\n\nexport const aboveMobile = { minWidth: onlyMobile.maxWidth + 1 }\nexport const aboveTablet = { minWidth: onlyTablet.maxWidth + 1 }\nexport const aboveDesktop = { minWidth: onlyDesktop.maxWidth + 1 }\n\nexport const belowTablet = { maxWidth: onlyTablet.minWidth - 1 }\nexport const belowDesktop = { maxWidth: onlyDesktop.minWidth - 1 }\nexport const belowLarge = { maxWidth: onlyLarge.minWidth - 1 }\n","import React, { Component } from 'react'\nimport { Responsive, Popup, Button, Icon } from 'semantic-ui-react'\n\nimport * as BREAKPOINTS from '../../constants/breakpoints'\n\nconst styles = {\n  blockHeaderStyles: {\n    borderBottom: '3px double #021a40',\n    backgroundColor: '#021a40',\n    color: '#fff',\n    padding: '5px 10px 5px 20px'\n  },\n  filePath: {\n    fontSize: '.9em',\n    display: 'inline-block'\n  },\n  limitedTitle: {\n    display: 'inline-block',\n    width: '125px',\n    textOverflow: 'ellipsis',\n    overflow: 'hidden'\n  }\n}\n\nclass CodeHeader extends Component {\n  render () {\n    let { block_path, collapseHandler, triggerRef } = this.props\n    return (\n      <div style={styles.blockHeaderStyles} ref={triggerRef}>\n        <FilePath block_path={block_path} />\n        <HeaderControlButton handler={() => collapseHandler(false)} icon=\"plus\" label=\"Expand All\" />\n        <HeaderControlButton handler={() => collapseHandler(true)} icon=\"minus\" label=\"Collapse All\" />\n        <HeaderControlButton icon=\"copy\" label=\"Copy All\" />\n      </div>\n    )\n  }\n}\n\nexport default CodeHeader\n\nexport class FilePath extends Component {\n  constructor (props) {\n    super(props)\n    let path_segments = props.block_path.split('/')\n    this.block_file = path_segments[path_segments.length - 1]\n    this.block_path = this.props.block_path\n  }\n\n  render () {\n    let { block_file, block_path } = this\n    return (\n      <div style={styles.filePath}>\n        <Responsive as=\"span\" {...BREAKPOINTS.onlyMobile}><span style={styles.limitedTitle}>{block_file}</span></Responsive>\n        <Responsive as=\"span\" {...BREAKPOINTS.aboveMobile}>{block_path}</Responsive>\n      </div>\n    )\n  }\n}\n\nexport class HeaderControlButton extends Component {\n  state = { isOpen: false };\n\n  handleOpen = (e) => {\n    this.setState({ isOpen: true })\n    if (e.type === 'click') this.handleTimeout()\n  }\n\n  handleTimeout = () => {\n    this.timeout = setTimeout(() => {\n      this.setState({ isOpen: false })\n    }, 400)\n  }\n\n  handleClose = () => {\n    this.setState({ isOpen: false })\n    clearTimeout(this.timeout)\n  }\n\n  render () {\n    let { handler, icon, label } = this.props\n    return (\n      <span onTouchStart={this.handleTimeout}>\n        <Popup\n          on={['click', 'hover']}\n          open={this.state.isOpen}\n          onClose={this.handleClose}\n          onOpen={this.handleOpen}\n          trigger={\n            <Button className={icon} onClick={handler}\n              icon size=\"mini\" floated=\"right\" color=\"grey\">\n              <Icon name={icon} />\n            </Button>\n          }\n          position=\"bottom center\" content={label}\n        />\n      </span>\n    )\n  }\n}\n","/* global hljs */\nimport React, { Component } from 'react'\nimport { array, string } from 'prop-types'\n\nclass CodeFull extends Component {\n  static propTypes = {\n    section_id: string.isRequired,\n    contents: array.isRequired,\n    block_type: string.isRequired\n  }\n\n  componentDidMount () {\n    hljs.highlightBlock(document.getElementById(this.props.section_id + '_full'))\n  }\n\n  render () {\n    let { section_id, contents, block_type } = this.props\n    return (\n      <code id={section_id + '_full'}>\n        <pre className={block_type}>{contents.join('\\n')}</pre>\n      </code>\n    )\n  }\n}\n\nexport default CodeFull\n","/* global hljs */\nimport React, { Component } from 'react'\nimport { array, string } from 'prop-types'\n\nclass CodeCollapsed extends Component {\n  static propTypes = {\n    section_id: string.isRequired,\n    contents: array.isRequired,\n    block_type: string.isRequired\n  }\n\n  componentDidMount () {\n    hljs.highlightBlock(document.getElementById(this.props.section_id + '_collapsed'))\n  }\n\n  render () {\n    let { contents, section_id, block_type } = this.props\n    return (\n      <code id={section_id + '_collapsed'}>\n        <pre className={block_type}>\n          <div>\n            {contents[0]}\n            <i className=\"fa fa-arrows-h\" aria-hidden=\"true\"></i>\n            {contents[contents.length - 1].trim()}\n          </div>\n        </pre>\n      </code>\n    )\n  }\n}\n\nexport default CodeCollapsed\n","import React, { Component } from 'react'\nimport { string, array, oneOf } from 'prop-types'\n\nimport CodeFull from './code_full'\nimport CodeCollapsed from './code_collapsed'\n\nconst styles = {\n  codeSectionStyle: {\n    display: 'table-row',\n    padding: '0 5px',\n    lineHeight: '100%'\n  },\n  codeGutterStyle: {\n    display: 'table-cell',\n    padding: '0 5px'\n  },\n  codeBodyStyle: {\n    margin: 0,\n    display: 'table-cell',\n    width: '100%',\n    paddingRight: '10px'\n  }\n}\n\nclass CodeSection extends Component {\n  static propTypes = {\n    section_id: string.isRequired,\n    contents: array.isRequired,\n    block_type: string,\n    priority: oneOf(['low', 'normal', 'high'])\n  };\n\n  constructor (props) {\n    super(props)\n    this.state = {\n      collapsed: props.priority === 'low'\n    }\n  }\n\n  toggleCollapse = () =>\n    this.props.priority === 'low' && this.setState({ collapsed: !this.state.collapsed });\n\n  setCollapse = (bool) =>\n    this.props.priority === 'low' && this.setState({ collapsed: bool });\n    // called by reference when +/- buttons are clicked in CodeHeader\n\n  render () {\n    let { section_id, priority } = this.props\n    let { collapsed } = this.state\n    let icon = collapsed ? 'plus' : 'minus'\n\n    return (\n      <div className={priority + 'PrioritySection'} onClick={this.toggleCollapse} style={styles.codeSectionStyle}>\n        <div className=\"codeGutter\" style={styles.codeGutterStyle}>\n          <i className={'fa fa-' + icon + '-square-o'}></i>\n        </div>\n        <div className=\"codeBody\" style={styles.codeBodyStyle} id={section_id}>\n          { collapsed ? <CodeCollapsed {...this.props} /> : <CodeFull {...this.props} /> }\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default CodeSection\n","import React, { Component } from 'react'\nimport { shape, number, string, array, func } from 'prop-types'\n\nimport CodeHeader from './code_header'\nimport CodeSection from './code_section'\n\nconst styles = {\n  codeBlockStyle: {\n    margin: '1.5em 0'\n  },\n  blockBodyStyle: {\n    padding: '10px 0',\n    border: '1px solid #021a40',\n    backgroundColor: '#F0F0F0',\n    overflowX: 'scroll'\n  }\n}\n\nexport default class CodeBlock extends Component {\n  static propTypes = {\n    collapseSections: func,\n    attachCopyTrigger: func,\n    addSectionRef: func.isRequired,\n    node: shape(\n      { node_id: number, block_type: string, block_path: string, sections: array }\n    ).isRequired\n  };\n\n  renderCodeSections = () => {\n    let { addSectionRef, node } = this.props\n    return Array.from(node.sections, s =>\n      <CodeSection ref={addSectionRef} block_type={node.block_type}\n        priority={s.priority} contents={s.contents} key={s.section_id} section_id={s.section_id} />\n    )\n  };\n\n  render () {\n    let { collapseSections, attachCopyTrigger, node } = this.props\n    let { node_id, block_type, block_path } = node\n\n    return (\n      <div style={styles.codeBlockStyle} key={'code_fence_' + node_id}\n        id={'code_block_' + node_id} className={'language-' + block_type}>\n        { block_path &&\n          <CodeHeader block_path={block_path} collapseHandler={collapseSections}\n            triggerRef={attachCopyTrigger} />\n        }\n        <div style={styles.blockBodyStyle}>\n          { this.renderCodeSections() }\n        </div>\n      </div>\n    )\n  }\n}\n","import React, { Component } from 'react'\nimport { shape, number, string } from 'prop-types'\nimport ClipboardJS from 'clipboard'\n\nimport CodeFence from './lib/code_fence'\nimport CodeBlock from '../components/nodes/code_block'\n\nclass CodeExample extends Component {\n  static propTypes = {\n    node: shape({ id: number, content: string }).isRequired\n  };\n\n  constructor (props) {\n    super(props)\n    this.code_fence = new CodeFence(props.node)\n    this.section_refs = []\n  }\n\n  componentDidMount () {\n    if (this.triggerCopy) {\n      let button = this.triggerCopy.querySelector('button.copy')\n      return new ClipboardJS(button, {\n        text: () => this.code_fence.copy\n      })\n    }\n  }\n\n  collapseSections = (bool) => {\n    this.section_refs.forEach((ref) => {\n      if (ref) { ref.setCollapse(bool) }\n    })\n  }\n\n  addSectionRef = s => this.section_refs.push(s);\n\n  attachCopyTrigger = (trigger) => { this.triggerCopy = trigger }\n\n  render () {\n    let node = {\n      block_type: this.code_fence.block_type,\n      block_path: this.code_fence.block_path,\n      sections: this.code_fence.sections\n    }\n\n    return (\n      <CodeBlock\n        node={node} section_refs={this.section_refs}\n        collapseSections={this.collapseSections} addSectionRef={this.addSectionRef}\n        attachCopyTrigger={this.attachCopyTrigger}\n      />\n    )\n  }\n}\n\nexport default CodeExample\n","import React, { PureComponent } from 'react'\nimport Fragment from 'react-dom-fragment'\nimport { array } from 'prop-types'\nimport MarkdownIt from 'markdown-it'\n\nimport CodeExample from '../containers/code_example'\n\nconst md = new MarkdownIt()\n\nexport default class NodesList extends PureComponent {\n  static propTypes = { nodes: array }\n\n  renderNodes = (nodes) => nodes.map((node) =>\n    node.node_type === 'code_block'\n      ? <CodeExample key={'node_' + node.id} node={node} />\n      : <Fragment key={'node_' + node.id} dangerouslySetInnerHTML={{ __html: md.render(node.content) }} />\n  );\n\n  render () {\n    const { nodes } = this.props\n    return <div id=\"nodes-list\">{ this.renderNodes(nodes) }</div>\n  }\n}\n","import React from 'react'\nimport { shape, number, string } from 'prop-types'\nimport Link from 'redux-first-router-link'\n\nimport * as actions from '../actions/routes.js'\n\nconst styles = { chapter_footer_style: { margin: '30px 0', textAlign: 'center' } }\n\nChapterFooter.propTypes = {\n  next_chapter: shape({ id: number, title: string })\n}\n\nexport default function ChapterFooter (props) {\n  let { next_chapter } = props\n\n  return (\n    <div id=\"chapter-footer-link\" style={styles.chapter_footer_style}>\n      <h2>\n        {\n          next_chapter\n            ? <Link to={actions.routeChapter(next_chapter.id)}>Next - {next_chapter.title}</Link>\n            : 'The End - Thank you for Reading!'\n        }\n      </h2>\n    </div>\n  )\n}\n","import React from 'react'\nimport { shape, string, number, func, array } from 'prop-types'\nimport { Dropdown } from 'semantic-ui-react'\n\nconst styles = { dropdown: { margin: '0 1em' } }\n\nChapterMenuItems.propTypes = {\n  active_chapter: shape({ id: number, title: string }),\n  dispatchRouteChapter: func,\n  handleSidebarVisibility: func,\n  chapters: array\n}\n\nexport default function ChapterMenuItems (props) {\n  let { active_chapter, dispatchRouteChapter, handleSidebarVisibility, chapters } = props\n\n  const renderChapterOptions = () => {\n    return chapters.map((chapter) => ({\n      key: 'chapter_' + chapter.id,\n      id: 'chapter_menu_item_' + chapter.id,\n      value: chapter.id,\n      text: chapter.title,\n      active: chapter.id === active_chapter.id\n    }))\n  }\n\n  return (\n    <Dropdown onFocus={handleSidebarVisibility}\n      pointing=\"top right\"\n      tabIndex=\"1\"\n      placeholder=\"Jump to Chapter...\"\n      className=\"link item\"\n      style={styles.dropdown}\n      selectOnNavigation={false}\n      selectOnBlur={false}\n      value={active_chapter.id}\n      text={active_chapter.title}\n      onChange={dispatchRouteChapter}\n      options={renderChapterOptions()}\n    />\n  )\n}\n","import React from 'react'\nimport { string, func } from 'prop-types'\nimport { Image, Menu, Dropdown } from 'semantic-ui-react'\n\nimport { ConnectedGitHubIcon } from '../containers/route_provider'\n\nconst styles = {\n  profile: {\n    maxHeight: '32x',\n    maxWidth: '32px',\n    marginLeft: '1.757px'\n  }\n}\n\nUserBadge.propTypes = {\n  username: string,\n  avartar: string,\n  dispatchSignalSignout: func,\n  handleSidebarVisibility: func\n}\n\nexport default function UserBadge (props) {\n  return !props.username ? <ConnectedGitHubIcon /> : <ProfileIcon {...props} />\n}\n\nexport function ProfileIcon (props) {\n  const { username, avatar, dispatchSignalSignout, handleSidebarVisibility } = props\n  let badge = <Image src={avatar} avatar style={styles.profile}/>\n\n  return (\n    <Menu.Item name={username} fitted>\n      <Dropdown closeOnBlur={true} onFocus={handleSidebarVisibility} icon={badge} compact pointing=\"top right\">\n        <Dropdown.Menu>\n          <Dropdown.Item onClick={dispatchSignalSignout}>Sign Out</Dropdown.Item>\n        </Dropdown.Menu>\n      </Dropdown>\n    </Menu.Item>\n  )\n}\n","import React from 'react'\nimport { string, func } from 'prop-types'\nimport { Menu, Icon } from 'semantic-ui-react'\n\nconst styles = { signout: { color: '#cc0000' } }\n\nSideBarSignout.propTypes = {\n  username: string,\n  handleCloseClick: func,\n  dispatchSignalSignout: func\n}\n\nexport default function SideBarSignout (props) {\n  let { username, handleCloseClick, dispatchSignalSignout } = props\n\n  const handleSignout = () => {\n    handleCloseClick()\n    dispatchSignalSignout()\n  }\n\n  return username\n    ? <Menu.Item link={true} onClick={handleSignout} name='Sign Out'>\n      <div style={styles.signout}><Icon name='cancel' />Sign Out</div>\n    </Menu.Item> : null\n}\n","import { connect } from 'react-redux'\n\nimport UserBadge from '../components/user_badge'\nimport SideBarSignout from '../components/side_bar_signout'\nimport { signalSignout } from '../actions/user'\n\nexport const connectToUser = (WrappedComponent) => {\n  return connect(mapStateToProps, mapDispatchToProps)(WrappedComponent)\n}\n\nconst mapStateToProps = (state) => ({\n  username: state.user.username,\n  avatar: state.user.avatar\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  dispatchSignalSignout: () => dispatch(signalSignout())\n})\n\n// EXPORTABLE CONNECTED COMPONENTS\nexport const ConnectedUserBadge = connectToUser(UserBadge)\nexport const ConnectedSidebarSignOut = connectToUser(SideBarSignout)\n","import React from 'react'\nimport { shape, string, number, func } from 'prop-types'\nimport { Container, Image, Menu, Icon, Responsive } from 'semantic-ui-react'\n\nimport rrLogo from '../assets/images/reactivating-rails.png'; import * as BREAKPOINTS from '../constants/breakpoints'\nimport ChapterMenuItems from './chapter_menu_items'\nimport { ConnectedUserBadge } from '../containers/user_provider'\n\nconst styles = {\n  fixedMenuStyle: {\n    backgroundColor: '#fff',\n    border: '1px solid #ddd',\n    boxShadow: '0px 3px 5px rgba(0, 0, 0, 0.2)',\n    paddingLeft: '1em',\n    paddingRight: '1em',\n    maxWidth: '100vw' // new code\n  },\n  menuIcon: { margin: '0' },\n  logo: {\n    margin: 'auto 1.5em',\n    maxWidth: '230px',\n    verticalAlign: 'middle'\n  }\n}\n\nMenuBar.propTypes = {\n  active_chapter: shape({ id: number, title: string }),\n  handleSidebarVisibility: func\n}\n\nexport default function MenuBar (props) {\n  let { active_chapter, handleSidebarVisibility } = props\n  return (\n    <Menu id=\"menu-bar\" onClick={handleSidebarVisibility} size=\"huge\" borderless fixed=\"top\" style={ styles.fixedMenuStyle }>\n      <Container>\n        <Menu.Item id=\"side-menu-button\" link={true} fitted name='Main Menu'>\n          <Icon id=\"side-menu-icon\" style={styles.menuIcon} color=\"black\" name='content' size=\"large\" />\n        </Menu.Item>\n        <Image fluid wrapped style={styles.logo} alt=\"Reactivating Rails\" src={rrLogo} />\n        <Menu.Menu position='right' value={active_chapter}>\n          <Responsive {...BREAKPOINTS.aboveMobile } >\n            <ChapterMenuItems {...props} />\n          </Responsive>\n          <ConnectedUserBadge handleSidebarVisibility={handleSidebarVisibility} />\n        </Menu.Menu>\n      </Container>\n    </Menu>\n  )\n}\n","import React, { Component } from 'react'\nimport { array, shape, number, string, func } from 'prop-types'\nimport { Menu, Sidebar, Icon } from 'semantic-ui-react'\n\nimport { ConnectedSidebarSignOut } from '../containers/user_provider'\n\nconst styles = {\n  popoutLayer: {\n    position: 'fixed',\n    top: '0px',\n    left: '0px'\n  },\n  pusher: { minHeight: '100vh', minWidth: '100vw' },\n  sideBar: {\n    minWidth: '320px',\n    maxWidth: '320px',\n    minHeight: '100vh',\n    maxHeight: '100vh',\n    padding: '45px 0 0 5px',\n    zIndex: 100\n  }\n}\n\nexport default class SideBarPopout extends Component {\n  static propTypes = {\n    chapters: array,\n    active_chapter: shape({ id: number, title: string }),\n    dispatchRouteChapter: func\n  }\n\n  constructor (props) {\n    super(props)\n    this.state = { visible: false }\n  }\n\n  toggleVisibility = (bool) => {\n    let vis = bool === undefined ? !this.state.visible : bool\n    this.setState(() => ({ visible: vis }))\n  };\n\n  handleLink = (e, t) => {\n    this.props.dispatchRouteChapter(e, t)\n    this.toggleVisibility()\n  };\n\n  handleClose = () => this.toggleVisibility();\n\n  render () {\n    const { chapters, active_chapter } = this.props\n    let { visible } = this.state\n\n    const chapter_links = chapters.map((chapter) => {\n      let status = chapter.id === active_chapter.id\n      let key = 'chapter' + chapter.id\n      return <Menu.Item key={key} name={key} link={!status} onClick={!status ? this.handleLink : null}\n        disabled={status} value={chapter.id} children={chapter.title} />\n    })\n\n    return (\n      <div style={styles.popoutLayer} onBlur={this.handleBlur} id=\"sideBarPopout\">\n        <Sidebar.Pushable style={visible ? styles.pusher : null}>\n          <Sidebar as={Menu} animation='overlay' width='wide' visible={visible}\n            style={styles.sideBar} inverted vertical>\n            { chapter_links }\n            <ConnectedSidebarSignOut handleCloseClick={this.handleClose} />\n            <Menu.Item link={true} onClick={this.handleClose} name='Close Menu'>\n              <div><Icon name='cancel' />Close Menu</div>\n            </Menu.Item>\n          </Sidebar>\n          <Sidebar.Pusher onClick={this.handleClose} style={visible ? styles.pusher : null} dimmed />\n        </Sidebar.Pushable>\n      </div>\n    )\n  }\n}\n","import { connect } from 'react-redux'\nimport React, { Component } from 'react'\n\nimport ChapterFooter from '../components/chapter_footer'\nimport NavigationMenus from '../components/navigation_menus'\nimport { routeChapter } from '../actions/routes'\n\nexport const connectToChapters = (WrappedComponent) =>\n  connect(mapStateToProps, mapDispatchToProps)(chapterProvider(WrappedComponent))\n\nexport const chapterProvider = (WrappedComponent) => class ChapterFilter extends Component {\n  static displayName = WrappedComponent.displayName || WrappedComponent.name || 'Component';\n\n  render () {\n    const { active_chapter_id, chapters, ...otherProps } = this.props\n    const active_chapter = chapters.find(c => c.id === active_chapter_id)\n    const next_chapter = chapters.find(c => c.id === active_chapter_id + 1)\n\n    const cleaned_chapters = chapters.map(c => {\n      c.title = c.title.replace(/^chapter\\s?/i, '')\n      return c\n    })\n\n    return chapters && chapters.length\n      ? <WrappedComponent active_chapter={active_chapter || { id: -1, title: '' }}\n        next_chapter={next_chapter} chapters={cleaned_chapters} {...otherProps} /> : null\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  chapters: state.chapters,\n  active_chapter_id: state.settings.active_chapter_id\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  dispatchRouteChapter: (event, target) => dispatch(routeChapter(target.value))\n})\n\n// EXPORTABLE CONNECTED COMPONENTS\nexport const ConnectedChapterFooterLink = connectToChapters(ChapterFooter)\nexport const ConnectedNavigationMenus = connectToChapters(NavigationMenus)\n","import React from 'react'\n\nimport MenuBar from './menu_bar'\nimport SideBarPopout from './side_bar_popout'\n\nexport default function NavigationMenus (props) {\n  const sideBarRef = React.createRef()\n\n  const handleSidebarVisibility = (e) => {\n    let tgl = sideBarRef.current.toggleVisibility;\n    ['side-menu-button', 'side-menu-icon'].includes(e.target.id) ? tgl() : tgl(false)\n  }\n\n  return [\n    <SideBarPopout ref={sideBarRef} {...props} key=\"sidebar\" />,\n    <MenuBar handleSidebarVisibility={handleSidebarVisibility} {...props} key=\"menubar\" />\n  ]\n}\n","import React from 'react'\nimport { func, bool, number } from 'prop-types'\nimport { Button, Header, Icon, Modal } from 'semantic-ui-react'\n\nconst styles = { center: { textAlign: 'center' } }\n\nBookmarkModal.propTypes = {\n  dispatchRoutechapter: func,\n  dispatchSetBookmarkOffered: func,\n  displayState: bool,\n  last_read_id: number,\n  furthest_read_id: number,\n  active_chapter_id: number\n}\n\nexport default function BookmarkModal (props) {\n  const { displayState, dispatchRoutechapter, dispatchSetBookmarkOffered,\n    furthest_read_id, active_chapter_id, last_read_id } = props\n\n  const manageResponse = (e, data) => {\n    dispatchSetBookmarkOffered()\n    data.value && dispatchRoutechapter(data.value)\n  }\n\n  return (\n    <Modal open={displayState} onClose={dispatchSetBookmarkOffered} basic size='small'>\n      <Header icon='archive' content='Pick up where you left off' />\n      <Modal.Content>\n        <p>\n          We've saved some bookmarks on your behalf.\n          Would you like to resume reading at one of these locations?\n        </p>\n      </Modal.Content>\n      <Modal.Actions style={styles.center}>\n        <Button basic color='red' onClick={manageResponse} inverted>\n          <Icon name='remove' /> No, stay here\n        </Button>\n\n        {last_read_id !== furthest_read_id && active_chapter_id !== last_read_id &&\n        <Button color='yellow' value={last_read_id} onClick={manageResponse} inverted>\n          <Icon name='checkmark' /> Last read (Ch: {last_read_id})\n        </Button>}\n\n        <Button color='green' value={furthest_read_id} onClick={manageResponse} inverted>\n          <Icon name='checkmark' /> Furthest read (Ch: {furthest_read_id})\n        </Button>\n      </Modal.Actions>\n    </Modal>\n  )\n}\n","import { connect } from 'react-redux'\n\nimport BookmarkModal from '../components/bookmark_modal'\nimport { setBookmarkOffered } from '../actions/bookmarks'\nimport { routeChapter } from '../actions/routes'\n\nexport const calculateDisplayState = (state) => {\n  let { prompt_shown, last_read, furthest_read } = state.bookmarks\n  let loc = state.location.payload.chapter_id\n  return !((prompt_shown || (loc === last_read.chapter && loc === furthest_read.chapter)))\n}\n\nconst mapStateToProps = (state) => ({\n  displayState: calculateDisplayState(state),\n  last_read_id: state.bookmarks.last_read.chapter,\n  furthest_read_id: state.bookmarks.furthest_read.chapter,\n  active_chapter_id: state.settings.active_chapter_id\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  dispatchSetBookmarkOffered: (bool) => dispatch(setBookmarkOffered(bool)),\n  dispatchRoutechapter: (chapter_id) => dispatch(routeChapter(chapter_id))\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BookmarkModal)\n","import React from 'react'\nimport { Container } from 'semantic-ui-react'\n\nimport FilteredNodesList from '../containers/filtered_nodes_list'\nimport { ConnectedChapterFooterLink } from '../containers/chapter_provider'\nimport ConnectedBookmarkModal from '../containers/bookmarks_provider'\n\nconst styles = { reader_pane: { paddingBottom: '15px', overflowWrap: 'break-word' } }\n\nexport default function ReaderPane () {\n  return (\n    <div id=\"reader-pane\" style={ styles.reader_pane }>\n      <ConnectedBookmarkModal />\n      <Container text>\n        <FilteredNodesList />\n        <ConnectedChapterFooterLink />\n      </Container>\n    </div>\n  )\n}\n","import React from 'react'\nimport { Container } from 'semantic-ui-react'\nimport Link from 'redux-first-router-link'\n\nimport { routeHome } from '../actions/routes'\n\nexport default function ErrorPane () {\n  return (\n    <div id=\"error-pane\">\n      <Container text>\n        <h1>Well Shucks...</h1>\n        <p>This page is where we, unfortunately, make up some cutesy reason to apologize for our site not working at the moment. In any case, we don't seem able to do the things at the moment.</p>\n\n        <p>How about you <Link to={ routeHome() }>head to the homepage</Link> and try giving it another go?</p>\n      </Container>\n    </div>\n  )\n}\n","import React from 'react'\nimport { shape, string } from 'prop-types'\n\nimport ReaderPane from './reader_pane'\nimport ErrorPane from './error_pane'\nimport * as routes from '../constants/settings'\n\nRouterSwitch.propTypes = {\n  location: shape({ type: string })\n}\n\nexport default function RouterSwitch (props) {\n  const { location } = props\n\n  switch (location.type) {\n    case (routes.ERROR_ROUTE):\n      return (<ErrorPane />)\n    case (routes.CHAPTER_ROUTE):\n      return (<ReaderPane />)\n    case (routes.HOME_ROUTE):\n      return (<ReaderPane />)\n    default:\n      return (<ErrorPane />)\n  }\n}\n","import React from 'react'\nimport { object, string, shape } from 'prop-types'\nimport { Menu, Icon } from 'semantic-ui-react'\n\nimport { BASE_AUTH_PATH } from '../constants/settings'\n\nconst styles = {\n  githubIcon: { marginRight: 0 }\n}\n\nGithubIcon.propTypes = {\n  location: shape({ type: string, payload: object })\n}\n\nexport default function GithubIcon (props) {\n  const { location } = props\n  const base_path = 'https://github.com/login/oauth/authorize?client_id=a86bc65853ae65d3be52&redirect_uri='\n  const bounce_path = JSON.stringify({ type: location.type, payload: location.payload })\n  const rd = encodeURIComponent(BASE_AUTH_PATH + '?bounce_path=' + bounce_path)\n\n  return (\n    <Menu.Item href={base_path + rd} name='Sign in with GitHub' fitted>\n      <Icon name='github' style={styles.githubIcon} size=\"big\" />\n    </Menu.Item>\n  )\n}\n","import { connect } from 'react-redux'\nimport RouterSwitch from '../components/router_switch'\n\nimport GithubIcon from '../components/github_icon'\n\nconst routerProvider = (WrappedComponent = RouterSwitch) => {\n  let mapStateToProps = (state) => ({\n    location: state.location\n  })\n\n  return connect(mapStateToProps, null)(WrappedComponent)\n}\n\nexport default routerProvider\n\n// EXPORTABLE CONNECTED COMPONENTS\nexport const ConnectedGitHubIcon = routerProvider(GithubIcon)\n","import React from 'react'\nimport { string, array } from 'prop-types'\n\nconst styles = {\n  alertStyle: {\n    padding: '15px',\n    marginBottom: '20px',\n    border: '1px solid transparent',\n    borderRadius: '4px'\n  },\n\n  alertLevels: {\n    info: {\n      backgroundColor: '#d9edf7',\n      borderColor: '#bce8f1',\n      color: '#31708f'\n    },\n    warning: {\n      backgroundColor: '#fcf8e3',\n      borderColor: '#faebcc',\n      color: '#8a6d3b'\n    },\n    success: {\n      backgroundColor: '#dff0d8',\n      borderColor: '#d6e9c6',\n      color: '#3c763d'\n    },\n    danger: {\n      backgroundColor: '#f2dede',\n      borderColor: '#ebccd1',\n      color: '#a94442'\n    }\n  }\n}\n\nAlertList.propTypes = {\n  scope: string,\n  alerts: array\n}\n\nexport default function AlertList (props) {\n  let { scope, alerts } = props\n\n  alerts = alerts.map((a) => {\n    let ac = 'alert alert-' + a.level\n    let as = Object.assign(styles.alertStyle, styles.alertLevels[a.level])\n    return scope === a.scope &&\n      <div key={a.timestamp} children={a.message} className={ac} style={as} />\n  })\n\n  return <div className={'alert_list_' + scope}>{ alerts }</div>\n}\n","import React, { Component } from 'react'\nimport { Container } from 'semantic-ui-react'\nimport './App.css'\n\nimport routerProvider from './containers/route_provider'\nimport connectToAlerts from './containers/alert_provider'\nimport { ConnectedNavigationMenus } from './containers/chapter_provider'\nconst ConnectedRouterSwitch = routerProvider()\nconst ApplicationAlerts = connectToAlerts()\n\nclass App extends Component {\n  render () {\n    return (\n      <div id=\"app\">\n        <ConnectedNavigationMenus />\n        <Container text id=\"main-section\">\n          <ApplicationAlerts />\n          <ConnectedRouterSwitch />\n        </Container>\n      </div>\n    )\n  }\n}\n\nexport default App\n","import { connect } from 'react-redux'\n\nimport { scopes } from '../constants/alerts'\nimport AlertList from '../components/alert_list'\n\nexport default function AlertProvider (scope = scopes[0], WrappedComponent = AlertList) {\n  let mapStateToProps = (state) => ({\n    alerts: state.alerts,\n    scope: scope\n  })\n\n  return connect(mapStateToProps, null)(WrappedComponent)\n};\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\nimport { PersistGate } from 'redux-persist/lib/integration/react'\nimport registerServiceWorker from './registerServiceWorker'\n\nimport buildStore from './store/store'\nimport App from './App'\n\nlet { store, persistor } = buildStore()\nwindow.store = store\n\nReactDOM.render(\n  <Provider store={store}>\n    <PersistGate loading={null} persistor={persistor}>\n      <App />\n    </PersistGate>\n  </Provider>\n  , document.getElementById('root')\n)\n\nregisterServiceWorker()\n"],"sourceRoot":""}